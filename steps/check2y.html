<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django Forms - Full Tutorial</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #007BFF;
            color: white;
            padding: 20px;
            text-align: center;
        }
        main {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        section {
            background: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #007BFF;
        }
        p, li {
            font-size: 16px;
            line-height: 1.6;
        }
        code {
            background-color: #f4f4f4;
            padding: 3px;
            border-radius: 5px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
            overflow: auto;
        }
        button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .answer {
            display: none;
            margin-top: 10px;
            background-color: #e9f5ff;
            padding: 10px;
            border-left: 3px solid #007BFF;
        }
    </style>
    <script>
        function toggleAnswer(id) {
            var answer = document.getElementById(id);
            if (answer.style.display === "none") {
                answer.style.display = "block";
            } else {
                answer.style.display = "none";
            }
        }
    </script>
</head>
<body>

<header>
    <h1>Django Forms Full Tutorial</h1>
</header>

<main>
    <section>
        <h2>1. Introduction to Forms in Django</h2>
        <p>Django provides two types of forms:</p>
        <ul>
            <li><strong>forms.Form</strong>: For handling forms manually.</li>
            <li><strong>forms.ModelForm</strong>: Automatically creates forms tied to a model, with built-in <code>save()</code> methods.</li>
        </ul>
        <button onclick="toggleAnswer('intro')">See Answer</button>
        <div class="answer" id="intro">
            <p>Answer: forms.Form is a general form and you must handle data manually, while forms.ModelForm is tied to models and automates saving and validation.</p>
        </div>
    </section>

    <section>
        <h2>2. Step-by-Step Explanation of Forms</h2>
        <p>Let's create both types of forms: CustomContactForm (manual) and ContactForm (ModelForm).</p>
        <pre><code>
# models.py
from django.db import models

class Contact(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    email = models.EmailField()
    message = models.TextField()

    def __str__(self):
        return f"{self.first_name} {self.last_name}"
        </code></pre>

        <p>Now, we’ll create two forms:</p>
        <pre><code>
# forms.py
from django import forms
from .models import Contact

# Custom Form (No save method)
class CustomContactForm(forms.Form):
    first_name = forms.CharField(max_length=50)
    last_name = forms.CharField(max_length=50)
    email = forms.EmailField()
    message = forms.CharField(widget=forms.Textarea)

# Model Form (Automatic save)
class ContactForm(forms.ModelForm):
    class Meta:
        model = Contact
        fields = ['first_name', 'last_name', 'email', 'message']
        </code></pre>

        <button onclick="toggleAnswer('step2')">See Answer</button>
        <div class="answer" id="step2">
            <p>Answer: <code>CustomContactForm</code> is a manual form, while <code>ContactForm</code> is a ModelForm that is linked to the Contact model.</p>
        </div>
    </section>

    <section>
        <h2>3. Handling Form Submission in Views</h2>
        <p>We’ll handle form submission by creating two different views: one for manually saving data from CustomContactForm and another using the built-in save method for ContactForm.</p>
        <pre><code>
# views.py

from django.shortcuts import render, redirect
from .forms import CustomContactForm, ContactForm
from .models import Contact

# Custom form - manually save data
def custom_contact_view(request):
    if request.method == 'POST':
        form = CustomContactForm(request.POST)
        if form.is_valid():
            contact = Contact(
                first_name=form.cleaned_data['first_name'],
                last_name=form.cleaned_data['last_name'],
                email=form.cleaned_data['email'],
                message=form.cleaned_data['message']
            )
            contact.save()
            return render(request, 'form_app/success.html', {'name': f"{contact.first_name} {contact.last_name}"})
    else:
        form = CustomContactForm()
    return render(request, 'form_app/custom_contact.html', {'form': form})

# Model form - automatically save data
def contact_view(request):
    if request.method == 'POST':
        form = ContactForm(request.POST)
        if form.is_valid():
            contact = form.save()  # Save directly
            return render(request, 'form_app/success.html', {'name': f"{contact.first_name} {contact.last_name}"})
    else:
        form = ContactForm()
    return render(request, 'form_app/contact.html', {'form': form})
        </code></pre>

        <button onclick="toggleAnswer('step3')">See Answer</button>
        <div class="answer" id="step3">
            <p>Answer: In <code>custom_contact_view</code>, we manually save the form data by creating a Contact instance. In <code>contact_view</code>, we use the built-in <code>save()</code> method from ModelForm.</p>
        </div>
    </section>

    <section>
        <h2>4. Templates for Displaying the Form and Success Page</h2>
        <p>Create simple templates to display both forms and success pages.</p>
        <pre><code>
<!-- custom_contact.html -->
<form method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit</button>
</form>

<!-- success.html -->
<h1>Thank you, {{ name }}!</h1>
<p>Your message has been successfully sent.</p>
        </code></pre>

        <button onclick="toggleAnswer('step4')">See Answer</button>
        <div class="answer" id="step4">
            <p>Answer: These templates render the form and a success page using Django’s templating engine.</p>
        </div>
    </section>
</main>

</body>
</html>
